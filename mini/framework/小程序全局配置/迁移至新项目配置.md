## 自动升级

项目配置（mini.project.json）format2 格式开放了诸多可以提升开发者研发效率的的配置，如 新的 [ES5 编译配置](https://opendocs.alipay.com/mini/03dbc3#transpile) 以及 [全局对象访问策略](https://opendocs.alipay.com/mini/03dbc3#globalObjectMode) 等。在这个背景下，为了降低开发者适配新配置项的成本，IDE 3.8.0 版本开始会帮助开发者自动升级 mini.project.json 内容，开发者只需要使用新版 IDE 打开项目，即可自动升级。

### 提示
因为[小程序基础库 1.0 已不再进行功能迭代和问题修复](https://open.alipay.com/portal/forum/post/95501048)，format2 将默认使用小程序基础库 2.0 。

## 废弃配置项的迁移指南

从老的配置项迁移到 format2 是平滑的，但是为了更好的编译体验，建议对下列已废弃的配置项进行迁移

### enableNodeModuleBabelTransform 以及 node_modules_es6_whitelist

#### 案例 1
- 未启用 enableNodeModuleBabelTransform
- 未启用 node_modules_es6_whitelist

##### 迁移后配置
```json
{
  "format": 2,
  "compileOptions": {
    "transpile": {
      "script": {
        "ignore": [
          "**/node_modules/**"
        ]
      }
    }
  }
}
```

#### 案例 2
- 未启用 enableNodeModuleBabelTransform
- 启用 node_modules_es6_whitelist
如
```json
{
  "node_modules_es6_whitelist": ["foo"]
}
```

##### 迁移后配置
```json
{
  "format": 2,
  "compileOptions": {
    "transpile": {
      "script": {
        "ignore": [
          "**/node_modules/**",
          "!**/node_modules/foo/**"
        ]
      }
    }
  }
}
```

#### 案例 3
- 启用 enableNodeModuleBabelTransform

##### 迁移后配置
```json
{
  "format": 2,
  "compileOptions": {
    "transpile": {}
  }
}
```

##### 注意事项
上面这个配置可以直接平迁，但是对构建性能有损耗，**强烈推荐** 先按 `案例 1` 进行配置，再根据构建的错误提示按需配置 ignore规则。
