基础库是负责小程序框架的加载的容器，提供小程序框架需要的标准组件和标准 API 接口。

# 基础库与客户端的关系

小程序能力需要支付宝客户端来支撑，每一版基础库新增能力都需要特定版本以上客户端才能运行，高版本基础库的某些新能力无法兼容低版本客户端，关于基础库兼容方法，可参见 [兼容](https://opendocs.alipay.com/mini/framework/compatibility) 文档。

通过 [my.SDKVersion](https://opendocs.alipay.com/mini/api/sdk-version) 查看当前基础库版本号。

# 基础库更新时机

当基础库准备更新时，会在客户端内进行逐步灰度直到全量发布。当用户客户端更新至最新基础库后，小程序就会运行在最新的基础库上。

随着基础库的不断更新，老版本客户端不支持的能力越来越多，所以基础库支持范围有一个最低客户端版本的要求，即部分老版本客户端以后将无法更新到最新的基础库，会停留在某一历史版本。例如，如果用户的支付宝客户端版本是 **1.0.0** 版本，那么基础库最多更新到 **1.1.0**，详情可查看 [v1.x 版本](https://opendocs.alipay.com/mini/ide/framework-changelog)。

# 基础库版本分布

当前小程序基础库存在 **1.x** 和 **2.x** 版本，在新版本客户端上同时存在，详情可查看 [基础库 2.x 升级](https://opendocs.alipay.com/mini/framework/lib-upgrade-v2)，对应的版本分布如下：

## v2.x
更新时间：2023 年 08 月 04 日。

> \- 代表此版本占比低于 0.01%。

| **基础库版本** | **用户占比** | **支付宝客户端最低版本** |
| --- | --- | --- |
| >= 2.8.18 | 51.92% | 10.1.92 |
| 2.8.17 | 43.60%  | 10.1.92 |
| 2.8.15 | 3.36%  | 10.1.92 |
| 2.8.14 | 0.40%  | 10.1.92 |
| 2.8.12 | 0.03%  | 10.1.92 |
| 2.8.11 | 0.06%  | 10.1.92 |
| 2.8.10 | 0.17%  | 10.1.92 |
| 2.8.9 | 0.05%  | 10.1.92 |
| 2.8.8 | 0.05% | 10.1.92 |
| 2.8.7 | 0.04% | 10.1.92 |
| 2.8.6 | 0.04% | 10.1.92 |
| 2.8.5 | -     | 10.1.92 |
| 2.8.4 | 0.18% | 10.1.92 |
| 2.8.3 | 0.02% | 10.1.92 |
| 2.8.2 | - | 10.1.92 |
| 2.8.1 | - | 10.1.92 |
| 2.8.0 | - | 10.1.92 |
| 2.7.24 | - | 10.1.92 |
| 2.7.23 | - | 10.1.92 |
| 2.7.22 | - | 10.1.92 |
| 2.7.21 | - | 10.1.92 |
| 2.7.20 | - | 10.1.92 |
| 2.7.19 | - | 10.1.92 |
| 2.7.18 | - | 10.1.92 |
| 2.7.17 | - | 10.1.92 |
| 2.7.16 | - | 10.1.92 |
| 其它 | 0.08% | - |
## v1.x

更新时间：2021 年 12 月 13 日。

| **基础库版本** | **用户占比** | **支付宝客户端最低版本** |
| -------------- | ------------ | ------------------------ |
| >=1.25.4       | 99.18%       | 10.1.75                  |
| 1.25.3         | 0.02%        | 10.1.75                  |
| 1.25.1         | 0.02%        | 10.1.75                  |
| 1.24.13        | 0.74%        | 10.1.75                  |
| 其它           | 0.04%        | -                        |

# 设置最低基础库版本

登录 [开放平台控制台](https://open.alipay.com/dev/workspace) > 进入小程序详情页 > **小程序信息** > **基础设置**，可设置小程序的最低基础库版本。若小程序用户使用的基础库版本低于设置的最低版本要求，则无法正常使用小程序，并将提示用户更新支付宝版本。设置版本号后，小程序需重新发版才会生效。

**注意**：请确保已完成 [基础库 2.x 升级](https://opendocs.alipay.com/mini/framework/lib-upgrade-v2)，才能将最低基础库版本号设置为基础库 2.0 对应的版本号，否则在真机上会一直提示升级支付宝版本。

![](https://cdn.nlark.com/yuque/0/2022/png/179989/1661332691436-c5e1cad9-a781-428e-8e9e-48165032b02e.png)

点击 **最低基础库版本** 对应的 **设置** 按钮，可看到不同的最低基础库版本对应的受影响用户 UV 占比，即近 30 天内访问小程序的用户的基础库版本小于所选版本的占比。开发者可据此设置小程序的最低基础库版本。

选中需设置为最低基础库版本的版本号，点击 **确定** 按钮，即设置成功。

![](https://cdn.nlark.com/yuque/0/2022/png/179989/1667815039629-d9981ffc-4d62-43d5-87af-4915fa372195.png)

此时，**最低基础库版本** 设置项对应的状态变为 **已设置**。

![](https://cdn.nlark.com/yuque/0/2022/png/179989/1661332873573-2ca50a1d-af98-477f-8fae-bc5f2e1ac5fa.png)

# 常见问题

## Q：如何更新基础库版本？

A：没有 API 去执行更新的，是根据支付宝客户端版本来更新的。

## Q：如何切换 IDE 使用的基础库？

A：支付宝小程序 IDE 从 2.9 版本开始，支持切换运行的基础库版本。若要切换基础库版本，请点开模拟器顶部的四叶草设置菜单，点击 **设置**，便可以选择基础库版本进行模拟运行。**注意**：使用该功能需要保持网络通畅。

![](https://gw.alipayobjects.com/mdn/rms_aba389/afts/img/A*t39tQp7Xx74AAAAAAAAAAAAAARQnAQ)

# 相关文档

- [兼容](https://opendocs.alipay.com/mini/framework/compatibility)
- [v1.x 版本](https://opendocs.alipay.com/mini/ide/framework-changelog)
